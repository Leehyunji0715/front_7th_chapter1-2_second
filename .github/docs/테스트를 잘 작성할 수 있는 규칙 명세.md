# 📝 테스트를 잘 작성하기 위한 규칙 명세

좋은 테스트 코드는 시스템의 안정성을 보장하고, 리팩토링을 용이하게 하며, 코드 베이스의 **살아있는 문서** 역할을 수행합니다.

## I. 🎯 좋은 테스트 코드의 핵심 원칙: FIRST

테스트의 품질을 평가하는 기준으로 널리 사용되는 다섯 가지 핵심 원칙입니다.

- **F**ast (빠르게): 테스트는 자주 실행될 수 있도록 **매우 빠르게** 실행되어야 합니다.
- **I**solated (독립적으로): 각 테스트는 다른 테스트나 외부 환경에 **의존하지 않고** 독립적으로 실행되어야 하며, 순서에 관계없이 항상 동일한 결과를 보장해야 합니다.
- **R**epeatable (반복 가능하게): 어떤 환경에서 실행하더라도 **항상 같은 결과**를 반환해야 합니다. 이를 위해 외부 시스템(DB, 네트워크 등)은 Mock 객체 등을 사용하여 격리해야 합니다.
- **S**elf-Validating (자체 검증 가능하게): 테스트는 성공 또는 실패 여부를 **스스로 명확하게 판단**할 수 있어야 합니다. (별도의 수동 검증 불필요)
- **T**imely (적시에): 테스트는 테스트하려는 코드가 구현되기 **직전**이나 **동시**에 작성되어야 합니다.

---

## II. 🧱 테스트 코드 구조화 패턴: AAA

테스트 코드의 가독성을 높이고 역할을 명확히 구분하기 위한 표준 구조입니다.

| 단계        | 명칭          | 설명                                                                      |
| :---------- | :------------ | :------------------------------------------------------------------------ |
| **A**rrange | **준비**      | 테스트를 수행하기 위한 **초기 조건, 데이터, 객체**를 설정합니다. (Given)  |
| **A**ct     | **실행**      | 테스트하고자 하는 **실제 함수/메서드**를 호출하여 결과를 얻습니다. (When) |
| **A**ssert  | **단언/검증** | 실행 결과가 **기대하는 값과 일치하는지** 검증합니다. (Then)               |

---

## III. ✅ 실무에서 적용해야 할 네 가지 지침

제시해주신 실무적 경험을 반영하여 가치 있는 테스트를 작성하기 위한 구체적인 지침입니다.

### 1. **인터페이스(Public API)를 기준으로 테스트를 작성하자**

- **외부 노출 메서드에 집중:** 모든 테스트는 클래스 또는 모듈의 **외부에 노출되는 public 메서드**(`인터페이스`)를 기준으로 작성해야 합니다.
- **내부 구현 테스트 회피:** **캡슐화된 내부 구현(private 메서드 등)**에 대한 테스트는 피해야 합니다. 내부 구현이 변경될 때마다 테스트 코드가 깨지기 쉬워 유지보수 비용이 급증하며, 구현과의 **강한 의존성**을 형성합니다.
- **사용자 관점:** 컴포넌트 테스트 시, 구현 세부 명세 대신 **UI 구성 요소를 사용자가 사용하는 방식**과 유사하게 테스트해야 신뢰성이 높아집니다.

### 2. **커버리지보다는 의미 있는 테스트인지 고민하자**

- **가치 중심:** 단순한 커버리지 수치에 연연하지 말고, **버그 발생 가능성이 높은 핵심 로직**과 **비즈니스 가치**를 검증하는 데 집중해야 합니다.
- **간단한 함수 생략:** 변경 가능성이 거의 없고 로직이 간단한 유틸리티 함수 등은 과감하게 테스트를 생략하고, 해당 함수를 사용하는 **다른 모듈이나 컴포넌트의 로직에 포함되었을 때 한 번에 검증**하는 것이 더 효율적입니다.

### 3. **테스트 코드도 가독성을 높여야 합니다**

- **문서 역할:** 잘 작성된 테스트 코드는 시스템의 **문서**와 같습니다. 테스트 코드를 읽기 쉬워야 개발자가 빠르게 앱의 동작 방식과 요구사항을 파악할 수 있습니다.
- **명확한 디스크립션:** 테스트 함수의 이름(디스크립션)은 코드가 아닌 **비즈니스 행위와 시나리오**를 명확하게 설명해야 합니다.

### 4. **하나의 테스트에서는 가급적 하나의 동작만 검증하는 것이 좋습니다**

- **단일 검증 원칙:** 하나의 `Act` 단계는 **하나의 주요 동작 또는 결과**만을 검증하는 것에 집중해야 합니다.
- **가독성과 유지보수:** 다양한 컴포넌트가 조합되는 복잡한 시나리오가 있더라도, 이를 하나의 테스트에서 검증하기보다는 **여러 개의 테스트로 나누어** 검증하는 것이 가독성 및 유지보수에 훨씬 유리합니다.
